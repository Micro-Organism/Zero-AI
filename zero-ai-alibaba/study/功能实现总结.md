# åŠŸèƒ½å®ç°æ€»ç»“

> æ ¹æ® Examples æ€»ç»“æ–‡æ¡£å®ç°çš„æ‰€æœ‰åŠŸèƒ½

## âœ… å·²å®ç°åŠŸèƒ½

### 1. å¯¹è¯è®°å¿†æŒä¹…åŒ– âœ…

**åç«¯å®ç°**ï¼š
- `MemoryController` - è®°å¿†ç®¡ç† API
- `MemoryService` / `MemoryServiceImpl` - è®°å¿†æœåŠ¡å®ç°
- `RedisConfig` - Redis é…ç½®ï¼ˆé»˜è®¤ localhost:6379, password: rootï¼‰

**å‰ç«¯å®ç°**ï¼š
- `MemoryTest.vue` - è®°å¿†æµ‹è¯•ç»„ä»¶
- `memory.ts` - è®°å¿† API

**API ç«¯ç‚¹**ï¼š
- `GET /api/memory/history/{threadId}` - è·å–å¯¹è¯å†å²
- `DELETE /api/memory/history/{threadId}` - æ¸…ç©ºå¯¹è¯å†å²
- `GET /api/memory/threads` - è·å–æ‰€æœ‰çº¿ç¨‹
- `GET /api/memory/status` - è·å–è®°å¿†çŠ¶æ€

**é…ç½®è¯´æ˜**ï¼š
- Redis é»˜è®¤é…ç½®ï¼š`localhost:6379`, password: `root`
- å¯åœ¨ `application-dev.yml` ä¸­ä¿®æ”¹

---

### 2. Graph å·¥ä½œæµ âœ…

**åç«¯å®ç°**ï¼š
- `GraphController` - Graph å·¥ä½œæµ API
- `GraphService` / `GraphServiceImpl` - Graph æœåŠ¡å®ç°

**å‰ç«¯å®ç°**ï¼š
- `GraphTest.vue` - Graph æµ‹è¯•ç»„ä»¶
- `graph.ts` - Graph API

**API ç«¯ç‚¹**ï¼š
- `POST /api/graph/execute` - æ‰§è¡Œç®€å• Graph
- `POST /api/graph/stream` - æµå¼æ‰§è¡Œ Graph
- `POST /api/graph/parallel` - æ‰§è¡Œå¹¶è¡Œ Graph
- `GET /api/graph/status/{threadId}` - è·å– Graph çŠ¶æ€

**åŠŸèƒ½è¯´æ˜**ï¼š
- æ”¯æŒç®€å• Graph å·¥ä½œæµ
- æ”¯æŒå¹¶è¡Œ Graph æ‰§è¡Œ
- æ”¯æŒæµå¼è¾“å‡º

---

### 3. RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰âœ…

**åç«¯å®ç°**ï¼š
- `RagController` - RAG API
- `RagService` / `RagServiceImpl` - RAG æœåŠ¡å®ç°

**å‰ç«¯å®ç°**ï¼š
- `RagTest.vue` - RAG æµ‹è¯•ç»„ä»¶
- `rag.ts` - RAG API

**API ç«¯ç‚¹**ï¼š
- `POST /api/rag/upload` - ä¸Šä¼ æ–‡æ¡£
- `POST /api/rag/query` - RAG æŸ¥è¯¢
- `POST /api/rag/stream` - æµå¼ RAG æŸ¥è¯¢
- `DELETE /api/rag/document/{documentId}` - åˆ é™¤æ–‡æ¡£
- `GET /api/rag/documents` - è·å–æ–‡æ¡£åˆ—è¡¨

**åŠŸèƒ½è¯´æ˜**ï¼š
- æ”¯æŒæ–‡æ¡£ä¸Šä¼ å’Œå‘é‡åŒ–
- æ”¯æŒå‘é‡æ£€ç´¢
- æ”¯æŒæµå¼æŸ¥è¯¢
- æ³¨æ„ï¼šå®Œæ•´åŠŸèƒ½éœ€è¦é…ç½® EmbeddingModel å’Œ VectorStore

---

### 4. MCPï¼ˆModel Context Protocolï¼‰âœ…

**åç«¯å®ç°**ï¼š
- `McpController` - MCP API
- `McpService` / `McpServiceImpl` - MCP æœåŠ¡å®ç°

**å‰ç«¯å®ç°**ï¼š
- `McpTest.vue` - MCP æµ‹è¯•ç»„ä»¶
- `mcp.ts` - MCP API

**API ç«¯ç‚¹**ï¼š
- `GET /api/mcp/tools` - è·å–å·¥å…·åˆ—è¡¨
- `POST /api/mcp/call` - è°ƒç”¨å·¥å…·
- `POST /api/mcp/stream` - æµå¼è°ƒç”¨å·¥å…·
- `GET /api/mcp/status` - è·å– MCP çŠ¶æ€

**åŠŸèƒ½è¯´æ˜**ï¼š
- æ”¯æŒå·¥å…·åˆ—è¡¨æŸ¥è¯¢
- æ”¯æŒå·¥å…·è°ƒç”¨
- æ”¯æŒæµå¼å·¥å…·è°ƒç”¨
- æ³¨æ„ï¼šå®Œæ•´åŠŸèƒ½éœ€è¦é…ç½® MCP æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯

---

### 5. å¯è§‚æµ‹æ€§ âœ…

**é…ç½®å®ç°**ï¼š
- åœ¨ `application-dev.yml` ä¸­æ·»åŠ äº†å¯è§‚æµ‹æ€§é…ç½®
- æ”¯æŒ Zipkin è¿½è¸ª
- æ”¯æŒ Prometheus æŒ‡æ ‡

**é…ç½®è¯´æ˜**ï¼š
- Zipkin ç«¯ç‚¹ï¼š`http://localhost:9411/api/v2/spans`
- Prometheus ç«¯ç‚¹ï¼š`/actuator/prometheus`
- Metrics ç«¯ç‚¹ï¼š`/actuator/metrics`

---

### 6. å¤šæ¨¡æ€ âœ…

**åç«¯å®ç°**ï¼š
- `MultimodalController` - å¤šæ¨¡æ€ API
- `MultimodalService` / `MultimodalServiceImpl` - å¤šæ¨¡æ€æœåŠ¡å®ç°

**å‰ç«¯å®ç°**ï¼š
- `MultimodalTest.vue` - å¤šæ¨¡æ€æµ‹è¯•ç»„ä»¶
- `multimodal.ts` - å¤šæ¨¡æ€ API

**API ç«¯ç‚¹**ï¼š
- `POST /api/multimodal/image/generate` - å›¾åƒç”Ÿæˆ
- `POST /api/multimodal/image/understand` - å›¾åƒç†è§£
- `POST /api/multimodal/audio/tts` - æ–‡æœ¬è½¬è¯­éŸ³
- `POST /api/multimodal/audio/stt` - è¯­éŸ³è½¬æ–‡æœ¬
- `POST /api/multimodal/chat` - å¤šæ¨¡æ€å¯¹è¯

**åŠŸèƒ½è¯´æ˜**ï¼š
- æ”¯æŒå›¾åƒç”Ÿæˆå’Œç†è§£
- æ”¯æŒéŸ³é¢‘å¤„ç†ï¼ˆTTS/STTï¼‰
- æ”¯æŒå¤šæ¨¡æ€å¯¹è¯
- æ³¨æ„ï¼šå®Œæ•´åŠŸèƒ½éœ€è¦é…ç½® ImageModel å’Œ AudioModel

---

## ğŸ“¦ ä¾èµ–è¯´æ˜

### å·²æ·»åŠ çš„ä¾èµ–

```xml
<!-- Graph Core -->
<dependency>
    <groupId>com.alibaba.cloud.ai</groupId>
    <artifactId>spring-ai-alibaba-graph-core</artifactId>
    <version>1.1.0.0-RC2</version>
</dependency>

<!-- Redis -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-redis</artifactId>
</dependency>

<!-- RAG - PGvector -->
<dependency>
    <groupId>org.springframework.ai</groupId>
    <artifactId>spring-ai-pgvector-store</artifactId>
    <version>1.1.0</version>
</dependency>

<!-- MCP -->
<dependency>
    <groupId>com.alibaba.cloud.ai</groupId>
    <artifactId>spring-ai-alibaba-mcp-server-boot-starter</artifactId>
    <version>1.1.0.0-RC2</version>
</dependency>
<dependency>
    <groupId>com.alibaba.cloud.ai</groupId>
    <artifactId>spring-ai-alibaba-mcp-client-boot-starter</artifactId>
    <version>1.1.0.0-RC2</version>
</dependency>

<!-- å¯è§‚æµ‹æ€§ -->
<dependency>
    <groupId>io.micrometer</groupId>
    <artifactId>micrometer-tracing-bridge-brave</artifactId>
</dependency>
<dependency>
    <groupId>io.zipkin.reporter2</groupId>
    <artifactId>zipkin-reporter-brave</artifactId>
</dependency>
<dependency>
    <groupId>io.micrometer</groupId>
    <artifactId>micrometer-registry-prometheus</artifactId>
</dependency>

<!-- PostgreSQL -->
<dependency>
    <groupId>org.postgresql</groupId>
    <artifactId>postgresql</artifactId>
    <scope>runtime</scope>
</dependency>
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### application-dev.yml

å·²æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

```yaml
spring:
  # Redis é…ç½®ï¼ˆé»˜è®¤æœ¬åœ°ï¼‰
  data:
    redis:
      host: localhost
      port: 6379
      password: root
      database: 0
  
  # PostgreSQL é…ç½®ï¼ˆé»˜è®¤æœ¬åœ°ï¼Œç”¨äº PGvectorï¼‰
  datasource:
    url: jdbc:postgresql://localhost:5432/ai_db
    username: root
    password: root
  
  # Graph é…ç½®
  ai:
    graph:
      checkpoint:
        type: redis
  
  # RAG é…ç½®
  ai:
    vectorstore:
      pgvector:
        index-name: documents
        dimensions: 1536

# å¯è§‚æµ‹æ€§é…ç½®
management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus,metrics
  tracing:
    sampling:
      probability: 1.0
  zipkin:
    tracing:
      endpoint: http://localhost:9411/api/v2/spans
```

---

## ğŸ¨ å‰ç«¯å®ç°

### æ–°å¢é¡µé¢

1. **é«˜çº§åŠŸèƒ½æµ‹è¯•é¡µé¢** (`AdvancedFeaturesTest.vue`)
   - ä½¿ç”¨ Tabs ç»„ç»‡æ‰€æœ‰é«˜çº§åŠŸèƒ½
   - åŒ…å« 5 ä¸ª Tabï¼šå¯¹è¯è®°å¿†ã€Graph å·¥ä½œæµã€RAGã€MCPã€å¤šæ¨¡æ€

2. **ç»„ä»¶ç›®å½•** (`components/advanced/`)
   - `MemoryTest.vue` - å¯¹è¯è®°å¿†æµ‹è¯•
   - `GraphTest.vue` - Graph å·¥ä½œæµæµ‹è¯•
   - `RagTest.vue` - RAG æµ‹è¯•
   - `McpTest.vue` - MCP æµ‹è¯•
   - `MultimodalTest.vue` - å¤šæ¨¡æ€æµ‹è¯•

### æ–°å¢ API

- `api/memory.ts` - è®°å¿† API
- `api/graph.ts` - Graph API
- `api/rag.ts` - RAG API
- `api/mcp.ts` - MCP API
- `api/multimodal.ts` - å¤šæ¨¡æ€ API

### è·¯ç”±æ›´æ–°

- æ–°å¢è·¯ç”±ï¼š`/advanced` - é«˜çº§åŠŸèƒ½æµ‹è¯•é¡µé¢
- é¦–é¡µæ–°å¢å¡ç‰‡ï¼šé«˜çº§åŠŸèƒ½æµ‹è¯•

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. ä¸­é—´ä»¶é…ç½®

**Redis**ï¼š
- é»˜è®¤é…ç½®ï¼š`localhost:6379`, password: `root`
- å¦‚æœ Redis æœªå¯åŠ¨ï¼Œè®°å¿†æŒä¹…åŒ–åŠŸèƒ½ä¼šé™çº§åˆ°å†…å­˜æ¨¡å¼

**PostgreSQL**ï¼š
- é»˜è®¤é…ç½®ï¼š`localhost:5432`, database: `ai_db`, username: `root`, password: `root`
- éœ€è¦å®‰è£… PGvector æ‰©å±•
- å¦‚æœ PostgreSQL æœªå¯åŠ¨ï¼ŒRAG åŠŸèƒ½ä¼šé™çº§åˆ°å†…å­˜æ¨¡å¼

### 2. åŠŸèƒ½å®Œæ•´æ€§

**ç®€åŒ–å®ç°**ï¼š
- éƒ¨åˆ†åŠŸèƒ½ä½¿ç”¨äº†ç®€åŒ–å®ç°ï¼ˆå¦‚ RAGã€MCPã€å¤šæ¨¡æ€ï¼‰
- å®Œæ•´åŠŸèƒ½éœ€è¦é…ç½®å¯¹åº”çš„ Modelï¼ˆEmbeddingModelã€ImageModelã€AudioModel ç­‰ï¼‰

**åç»­å®Œå–„**ï¼š
- æ ¹æ®å®é™…éœ€æ±‚ï¼Œå‚è€ƒ Examples ä¸­çš„å®Œæ•´å®ç°
- é€æ­¥å®Œå–„å„åŠŸèƒ½çš„å®Œæ•´å®ç°

### 3. å¯è§‚æµ‹æ€§

**Zipkin**ï¼š
- éœ€è¦å¯åŠ¨ Zipkin æœåŠ¡ï¼ˆé»˜è®¤ç«¯å£ 9411ï¼‰
- å¦‚æœ Zipkin æœªå¯åŠ¨ï¼Œè¿½è¸ªåŠŸèƒ½ä¸å¯ç”¨ï¼Œä½†ä¸å½±å“å…¶ä»–åŠŸèƒ½

**Prometheus**ï¼š
- Metrics ç«¯ç‚¹ï¼š`/actuator/prometheus`
- å¯ç”¨äºç›‘æ§å’ŒæŒ‡æ ‡æ”¶é›†

---

## ğŸš€ ä½¿ç”¨è¯´æ˜

### 1. å¯åŠ¨ä¸­é—´ä»¶

**Redis**ï¼š
```bash
# ä½¿ç”¨ Docker å¯åŠ¨
docker run -d -p 6379:6379 redis:latest redis-server --requirepass root
```

**PostgreSQLï¼ˆå¸¦ PGvectorï¼‰**ï¼š
```bash
# ä½¿ç”¨ Docker å¯åŠ¨
docker run -d -p 5432:5432 -e POSTGRES_PASSWORD=root -e POSTGRES_USER=root -e POSTGRES_DB=ai_db pgvector/pgvector:pg16
```

**Zipkin**ï¼š
```bash
# ä½¿ç”¨ Docker å¯åŠ¨
docker run -d -p 9411:9411 openzipkin/zipkin
```

### 2. è®¿é—®å‰ç«¯

1. å¯åŠ¨åç«¯æœåŠ¡ï¼š`mvn spring-boot:run`
2. å¯åŠ¨å‰ç«¯æœåŠ¡ï¼š`cd frontend && pnpm run dev`
3. è®¿é—®ï¼š`http://localhost:3000`
4. ç‚¹å‡»"é«˜çº§åŠŸèƒ½æµ‹è¯•"å¡ç‰‡

### 3. æµ‹è¯•åŠŸèƒ½

**å¯¹è¯è®°å¿†**ï¼š
- æŸ¥çœ‹è®°å¿†çŠ¶æ€
- æŸ¥è¯¢å¯¹è¯å†å²
- ç®¡ç†çº¿ç¨‹

**Graph å·¥ä½œæµ**ï¼š
- æ‰§è¡Œç®€å• Graph
- æ‰§è¡Œå¹¶è¡Œ Graph
- æµå¼æ‰§è¡Œ

**RAG**ï¼š
- ä¸Šä¼ æ–‡æ¡£
- RAG æŸ¥è¯¢
- æµå¼æŸ¥è¯¢

**MCP**ï¼š
- æŸ¥çœ‹å·¥å…·åˆ—è¡¨
- è°ƒç”¨å·¥å…·
- æµå¼è°ƒç”¨

**å¤šæ¨¡æ€**ï¼š
- å›¾åƒç”Ÿæˆå’Œç†è§£
- éŸ³é¢‘å¤„ç†ï¼ˆTTS/STTï¼‰
- å¤šæ¨¡æ€å¯¹è¯

---

## ğŸ“ åç»­å®Œå–„å»ºè®®

### 1. å®Œå–„ RAG å®ç°

- é…ç½® EmbeddingModelï¼ˆå¦‚ DashScope EmbeddingModelï¼‰
- é…ç½® VectorStoreï¼ˆå¦‚ PGvectorã€Milvusã€Elasticsearchï¼‰
- å®ç°æ–‡æ¡£è§£æå’Œåˆ†å—
- å®ç°æ£€ç´¢ç­–ç•¥ä¼˜åŒ–

### 2. å®Œå–„ MCP å®ç°

- é…ç½® MCP æœåŠ¡å™¨
- é…ç½® MCP å®¢æˆ·ç«¯
- å®ç°å·¥å…·è‡ªåŠ¨å‘ç°
- å®ç°æœåŠ¡æ³¨å†Œå‘ç°ï¼ˆNacosï¼‰

### 3. å®Œå–„å¤šæ¨¡æ€å®ç°

- é…ç½® ImageModelï¼ˆå¦‚ DashScope ImageModelï¼‰
- é…ç½® AudioModelï¼ˆå¦‚ DashScope AudioModelï¼‰
- å®ç°å›¾åƒç”Ÿæˆå’Œç†è§£çš„å®Œæ•´æµç¨‹
- å®ç°éŸ³é¢‘å¤„ç†çš„å®Œæ•´æµç¨‹

### 4. å®Œå–„ Graph å®ç°

- å®ç°æ›´å¤æ‚çš„ Graph å·¥ä½œæµ
- å®ç°äººå·¥ä»‹å…¥èŠ‚ç‚¹
- å®ç°çŠ¶æ€æŒä¹…åŒ–
- å®ç°å¹¶è¡Œå’Œæµå¼å¤„ç†

---

## âœ… å®ŒæˆçŠ¶æ€

| åŠŸèƒ½ | åç«¯ | å‰ç«¯ | çŠ¶æ€ |
|------|------|------|------|
| å¯¹è¯è®°å¿†æŒä¹…åŒ– | âœ… | âœ… | å®Œæˆ |
| Graph å·¥ä½œæµ | âœ… | âœ… | å®Œæˆï¼ˆåŸºç¡€ï¼‰ |
| RAG | âœ… | âœ… | å®Œæˆï¼ˆåŸºç¡€ï¼‰ |
| MCP | âœ… | âœ… | å®Œæˆï¼ˆåŸºç¡€ï¼‰ |
| å¯è§‚æµ‹æ€§ | âœ… | - | å®Œæˆï¼ˆé…ç½®ï¼‰ |
| å¤šæ¨¡æ€ | âœ… | âœ… | å®Œæˆï¼ˆåŸºç¡€ï¼‰ |

---

**æœ€åæ›´æ–°**ï¼š2025-01-05

**å®ç°è¯´æ˜**ï¼š
- æ‰€æœ‰åŠŸèƒ½å·²å®ç°åŸºç¡€ç‰ˆæœ¬
- éƒ¨åˆ†åŠŸèƒ½éœ€è¦é…ç½®å¯¹åº”çš„ Model å’Œä¸­é—´ä»¶æ‰èƒ½å®Œæ•´ä½¿ç”¨
- å‰ç«¯å·²å®ç°å®Œæ•´çš„æµ‹è¯•ç•Œé¢
- æ‰€æœ‰ API ç«¯ç‚¹å·²å®ç°å¹¶åˆ†ç±»åœ¨å¯¹åº”çš„ Controller ä¸­

